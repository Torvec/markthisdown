{% extends "base.html" %} 

{% block title %} Dashboard | MarkThisDown {% endblock%} 

{% block main %}
<h1 class="mb-6 text-xl font-bold">Dashboard</h1>

{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="bg-red-200">
      {% for message in messages %}
        <li class="text-center font-bold text-lg">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

<div class="flex gap-3 text-center mb-6">
  <a
    href="/new"
    class="block border border-purple-600 py-3 w-full rounded-xl"
  >
    New Markdown File
  </a>
  <form method="post" enctype="multipart/form-data" id="fileForm" action="/open" class="w-full">
    <input
      type="file"
      id="theFile"
      name="theFile"
      accept=".md"
      class="block border border-green-600 py-3 w-full rounded-xl cursor-pointer"
    />
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("theFile").addEventListener("change", () => {
    document.getElementById("fileForm").submit();
  });
});
</script>
{% endblock %}